{"ast":null,"code":"import { NavigationStart, RouteConfigLoadStart, RouteConfigLoadEnd, NavigationEnd, NavigationCancel } from '@angular/router';\nimport KTLayoutHeader from '../../../../../assets/js/layout/base/header';\nimport KTLayoutHeaderMenu from '../../../../../assets/js/layout/base/header-menu';\nimport { KTUtil } from '../../../../../assets/js/components/util';\nimport { BehaviorSubject } from 'rxjs';\nimport { isNullOrUndefined } from 'util';\nimport { filter } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../../_metronic/core\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../topbar/topbar.component\";\nimport * as i5 from \"@ng-bootstrap/ng-bootstrap\";\nconst _c0 = [\"ktHeaderMenu\"];\n\nfunction HeaderComponent_ng_container_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"ngb-progressbar\", 10);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const _loader_r3 = ctx.ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"value\", _loader_r3);\n  }\n}\n\nfunction HeaderComponent_ng_container_11_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 12);\n    i0.ɵɵelementStart(2, \"a\", 13);\n    i0.ɵɵelement(3, \"img\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵattribute(\"src\", ctx_r4.headerLogo, i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction HeaderComponent_ng_container_11_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\n\nfunction HeaderComponent_ng_container_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 11);\n    i0.ɵɵtemplate(2, HeaderComponent_ng_container_11_ng_container_2_Template, 4, 1, \"ng-container\", 9);\n    i0.ɵɵtemplate(3, HeaderComponent_ng_container_11_ng_container_3_Template, 1, 0, \"ng-container\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.asideSelfDisplay);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.headerMenuSelfStatic);\n  }\n}\n\nfunction HeaderComponent_ng_container_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"div\");\n    i0.ɵɵelementContainerEnd();\n  }\n}\n\nexport let HeaderComponent = /*#__PURE__*/(() => {\n  class HeaderComponent {\n    constructor(layout, router, activatedRoute) {\n      this.layout = layout;\n      this.router = router;\n      this.activatedRoute = activatedRoute;\n      this.headerMenuHTMLAttributes = {};\n      this.loaderSubject = new BehaviorSubject(0);\n      this.unsubscribe = []; // Read more: => https://brianflove.com/2016/12/11/anguar-2-unsubscribe-observables/\n\n      this.loader$ = this.loaderSubject; // page progress bar percentage\n\n      const routerSubscription = this.router.events.subscribe(event => {\n        if (event instanceof NavigationStart) {\n          // set page progress bar loading to start on NavigationStart event router\n          this.loaderSubject.next(10);\n        }\n\n        if (event instanceof RouteConfigLoadStart) {\n          this.loaderSubject.next(65);\n        }\n\n        if (event instanceof RouteConfigLoadEnd) {\n          this.loaderSubject.next(90);\n        }\n\n        if (event instanceof NavigationEnd || event instanceof NavigationCancel) {\n          // set page progress bar loading to end on NavigationEnd event router\n          this.loaderSubject.next(100);\n\n          if (this.routerLoaderTimout) {\n            clearTimeout(this.routerLoaderTimout);\n          }\n\n          this.routerLoaderTimout = setTimeout(() => {\n            this.loaderSubject.next(0);\n          }, 300);\n        }\n      });\n      this.unsubscribe.push(routerSubscription);\n      const root = this.activatedRoute.root;\n      this.breadcrumbs = this.getBreadcrumbs(root);\n      this.router.events.pipe(filter(event => event instanceof NavigationEnd)).subscribe(x => {\n        const path = this.activatedRoute.root;\n        this.breadcrumbs = this.getBreadcrumbs(path);\n      });\n    }\n\n    ngOnInit() {\n      this.headerContainerCSSClasses = this.layout.getStringCSSClasses('header_container');\n      this.headerMenuSelfDisplay = this.layout.getProp('header.menu.self.display');\n      this.headerMenuSelfStatic = this.layout.getProp('header.menu.self.static');\n      this.asideSelfDisplay = this.layout.getProp('aside.self.display');\n      this.headerSelfTheme = this.layout.getProp('header.self.theme') || '';\n      this.headerLogo = this.getLogoURL();\n      this.headerMenuCSSClasses = this.layout.getStringCSSClasses('header_menu');\n      this.headerMenuHTMLAttributes = this.layout.getHTMLAttributes('header_menu');\n    }\n\n    getLogoURL() {\n      let result = 'logo-light.png';\n\n      if (this.headerSelfTheme && this.headerSelfTheme === 'light') {\n        result = 'logo-dark.png';\n      }\n\n      if (this.headerSelfTheme && this.headerSelfTheme === 'dark') {\n        result = 'logo-dark.png';\n      }\n\n      return `./assets/media/logos/${result}`;\n    }\n\n    ngAfterViewInit() {\n      if (this.ktHeaderMenu) {\n        for (const key in this.headerMenuHTMLAttributes) {\n          if (this.headerMenuHTMLAttributes.hasOwnProperty(key)) {\n            this.ktHeaderMenu.nativeElement.attributes[key] = this.headerMenuHTMLAttributes[key];\n          }\n        }\n      }\n\n      KTUtil.ready(() => {\n        // Init Desktop & Mobile Headers\n        KTLayoutHeader.init('kt_header', 'kt_header_mobile'); // Init Header Menu\n\n        KTLayoutHeaderMenu.init('kt_header_menu', 'kt_header_menu_wrapper');\n      });\n    }\n\n    ngOnDestroy() {\n      this.unsubscribe.forEach(sb => sb.unsubscribe());\n\n      if (this.routerLoaderTimout) {\n        clearTimeout(this.routerLoaderTimout);\n      }\n    }\n\n    getBreadcrumbs(route, url = '', breadcrumbs = []) {\n      const children = route.children;\n      const ROUTE_DATA_BREADCRUMB = 'breadcrumb';\n\n      if (children.length === 0) {\n        return breadcrumbs;\n      }\n\n      for (const child of children) {\n        const routeURL = child.snapshot.url.map(segment => segment.path).join('/');\n\n        if (routeURL !== '') {\n          url += `/${routeURL}`;\n        }\n\n        const label = child.snapshot.data[ROUTE_DATA_BREADCRUMB];\n        const params = child.snapshot.params; // tslint:disable-next-line: deprecation\n\n        if (!isNullOrUndefined(label)) {\n          breadcrumbs.push({\n            label,\n            url,\n            params\n          });\n        }\n\n        return this.getBreadcrumbs(child, url, breadcrumbs);\n      }\n    }\n\n  }\n\n  HeaderComponent.ɵfac = function HeaderComponent_Factory(t) {\n    return new (t || HeaderComponent)(i0.ɵɵdirectiveInject(i1.LayoutService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n  };\n\n  HeaderComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: HeaderComponent,\n    selectors: [[\"app-header\"]],\n    viewQuery: function HeaderComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 7);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.ktHeaderMenu = _t.first);\n      }\n    },\n    decls: 14,\n    vars: 6,\n    consts: [[1, \"container-fluid\", \"d-flex\", \"align-items-stretch\", \"justify-content-between\"], [\"id\", \"kt_header_menu_wrapper\", 1, \"header-menu-wrapper\", \"header-menu-wrapper-left\"], [\"id\", \"kt_header_menu\", 1, \"header-menu\", \"header-menu-mobile\", \"header-menu-layout-default\"], [1, \"menu-nav\"], [\"data-menu-toggle\", \"click\", \"aria-haspopup\", \"true\", 1, \"menu-item\", \"menu-item-open\", \"menu-item-here\", \"menu-item-submenu\", \"menu-item-rel\", \"menu-item-open\", \"menu-item-here\", \"menu-item-active\"], [\"data-menu-toggle\", \"click\", \"aria-haspopup\", \"true\", 1, \"menu-item\", \"menu-item-submenu\"], [\"data-menu-toggle\", \"click\", \"aria-haspopup\", \"true\", 1, \"menu-item\", \"menu-item-submenu\", \"menu-item-rel\"], [1, \"topbar\"], [1, \"d-flex\", \"align-items-stretch\", \"justify-content-between\", 3, \"ngClass\"], [4, \"ngIf\"], [\"height\", \"3px\", 1, \"loading-bar\", 3, \"value\"], [\"kt_header_menu_wrapper\", \"\", \"id\", \"kt_header_menu_wrapper\", 1, \"header-menu-wrapper\", \"header-menu-wrapper-left\"], [\"fd\", \"\", 1, \"header-logo\"], [\"routerLink\", \"/\"], [\"alt\", \"Logo\"]],\n    template: function HeaderComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"ul\", 3);\n        i0.ɵɵelement(4, \"li\", 4);\n        i0.ɵɵelement(5, \"li\", 5);\n        i0.ɵɵelement(6, \"li\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"div\", 7);\n        i0.ɵɵelementStart(8, \"div\", 8);\n        i0.ɵɵtemplate(9, HeaderComponent_ng_container_9_Template, 2, 1, \"ng-container\", 9);\n        i0.ɵɵpipe(10, \"async\");\n        i0.ɵɵtemplate(11, HeaderComponent_ng_container_11_Template, 4, 2, \"ng-container\", 9);\n        i0.ɵɵtemplate(12, HeaderComponent_ng_container_12_Template, 2, 0, \"ng-container\", 9);\n        i0.ɵɵelement(13, \"app-topbar\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngClass\", ctx.headerContainerCSSClasses);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(10, 4, ctx.loader$));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.headerMenuSelfDisplay);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.headerMenuSelfDisplay);\n      }\n    },\n    directives: [i3.NgClass, i3.NgIf, i4.TopbarComponent, i5.NgbProgressbar, i2.RouterLinkWithHref],\n    pipes: [i3.AsyncPipe],\n    styles: [\"[_nghost-%COMP%]     .loading-bar{position:absolute;top:0;left:0;right:0;width:100%;background-color:#5d78ff}[_nghost-%COMP%]     .loading-bar .progress-bar{background-color:#5d78ff}[_nghost-%COMP%]     .topbar-item{height:100%}@media (min-width: 1025px){[_nghost-%COMP%]     .topbar, [_nghost-%COMP%]     .topbar-item-wrapper{height:100%}}\"]\n  });\n  return HeaderComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}