{"ast":null,"code":"import { first } from 'rxjs/operators';\nimport { API_ROUTES } from 'src/app/constant/constant';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/_metronic/core/services/common.service\";\nimport * as i2 from \"../../auth\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"ngx-toastr\";\nexport let PersonalInformationComponent = /*#__PURE__*/(() => {\n  class PersonalInformationComponent {\n    constructor(commonService, userService, fb, authService, cdr, toastr) {\n      this.commonService = commonService;\n      this.userService = userService;\n      this.fb = fb;\n      this.authService = authService;\n      this.cdr = cdr;\n      this.toastr = toastr;\n      this.subscriptions = [];\n      this.avatarPic = 'none';\n      this.filesName = [];\n      this.isImageExist = false;\n      this.profilePic = null;\n      this.moduleNameServiceRoute = API_ROUTES.USER;\n      this.isLoading$ = this.userService.isLoadingSubject.asObservable();\n    }\n\n    ngOnInit() {\n      const sb = this.userService.currentUserSubject.asObservable().pipe(first(user => !!user)).subscribe(user => {\n        this.user = Object.assign({}, user);\n        this.firstUserState = Object.assign({}, user);\n        this.oldFileName = this.user.profile_image;\n\n        if (this.user.profile_image) {\n          this.isImageExist = true;\n        }\n\n        this.loadForm();\n      });\n      this.subscriptions.push(sb);\n      this.getUser();\n    }\n\n    ngOnDestroy() {\n      this.subscriptions.forEach(sb => sb.unsubscribe());\n    }\n\n    loadForm() {\n      this.formGroup = this.fb.group({\n        profile_image: [this.user.profile_image],\n        first_name: [this.user.first_name],\n        last_name: [this.user.last_name],\n        phone: [this.user.phone],\n        email: [this.user.email]\n      });\n    }\n\n    getUser() {\n      this.commonService.getOne(this.user.id, this.moduleNameServiceRoute).subscribe(response => {\n        this.userDetails = response.result;\n        this.image = this.userDetails.thumbnail_photo_base64.data;\n        var enc = new TextDecoder(\"utf-8\");\n        var arr = new Uint8Array(this.image);\n        this.imageData = enc.decode(arr);\n      });\n    }\n    /**\r\n     * Checking control validation\r\n     *\r\n     * @param controlName: string => Equals to formControlName\r\n     * @param validationType: string => Equals to valitors name\r\n     */\n\n\n    isControlHasError(controlName, validationType) {\n      const control = this.formGroup.controls[controlName];\n\n      if (!control) {\n        return false;\n      }\n\n      const result = control.hasError(validationType) && (control.dirty || control.touched);\n      return result;\n    } // save() {\n    //   this.formGroup.markAllAsTouched();\n    //   if (!this.formGroup.valid) {\n    //     return;\n    //   }\n    //   if (this.removedPicture) {\n    //     this.formGroup.value.profile_image = null;\n    //   }\n    //   const formValues = this.formGroup.value;\n    //   formValues.oldFileName = this.oldFileName;\n    //   var myUserData = new FormData();\n    //   if (this.files) {\n    //     myUserData.append('files', this.files);\n    //   }\n    //   myUserData.append(\"data\", JSON.stringify(formValues));\n    //   this.authService.update(this.user.id, myUserData).subscribe(res => {\n    //     if (res) {\n    //       this.toastr.success(res.message, 'Success!');\n    //       const obj: any = {\n    //         name: res.result.name,\n    //         first_name: res.result.first_name,\n    //         last_name: res.result.last_name,\n    //         id: res.result.id,\n    //         email: res.result.email,\n    //         phone: res.result.phone,\n    //         profile_image: res.result.profile_image\n    //       };\n    //       this.ngOnInit();\n    //     }\n    //   });\n    // }\n    // cancel() {\n    //   this.user = Object.assign({}, this.firstUserState);\n    //   this.loadForm();\n    // }\n\n\n    getPic() {\n      if (this.profilePic) {\n        return `url('${this.profilePic}`;\n      } else if (this.user.profile_image == null && this.profilePic == null) {\n        return 'none';\n      } else {\n        return `url('http://localhost:3000/public/profile_images/${this.user.profile_image}')`;\n      }\n    }\n\n    deletePic() {\n      this.files = [];\n      this.user.profile_image = null;\n      this.profilePic = null;\n      this.removedPicture = true;\n      this.isImageExist = false;\n    } // helpers for View\n\n\n    isControlValid(controlName) {\n      const control = this.formGroup.controls[controlName];\n      return control.valid && (control.dirty || control.touched);\n    }\n\n    isControlInvalid(controlName) {\n      const control = this.formGroup.controls[controlName];\n      return control.invalid && (control.dirty || control.touched);\n    }\n\n    OnLoadImage(event) {\n      this.user.profile_image = null;\n      let myFileArray = event.target.files;\n\n      if (myFileArray[0].size < 5242880 && (myFileArray[0].type === \"application/pdf\" || myFileArray[0].type === \"image/png\" || myFileArray[0].type === \"image/jpg\" || myFileArray[0].type === \"image/jpeg\")) {\n        this.files = myFileArray[0];\n        let reader = new FileReader();\n        reader.readAsDataURL(myFileArray[0]);\n\n        reader.onload = e => {\n          this.filesName = [{\n            name: myFileArray[0].name,\n            size: myFileArray[0].size,\n            url: e.target.result\n          }]; // this.user.profile_image = e.target.result;\n\n          this.profilePic = e.target.result;\n          this.removedPicture = false;\n          this.isImageExist = true;\n          this.cdr.detectChanges();\n          this.getPic();\n        };\n      } else {\n        this.toastr.error(\"Invalid Image\", \"Errore\");\n      }\n    }\n\n  }\n\n  PersonalInformationComponent.ɵfac = function PersonalInformationComponent_Factory(t) {\n    return new (t || PersonalInformationComponent)(i0.ɵɵdirectiveInject(i1.CommonService), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.FormBuilder), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i4.ToastrService));\n  };\n\n  PersonalInformationComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PersonalInformationComponent,\n    selectors: [[\"app-personal-information\"]],\n    decls: 129,\n    vars: 25,\n    consts: [[1, \"card\", \"card-custom\", \"gutter-b\"], [1, \"card-body\"], [1, \"d-flex\", \"mb-5\"], [1, \"myOwn\"], [1, \"separator\", \"separator-solid\"], [\"form\", \"\", \"novalidate\", \"\", 3, \"formGroup\"], [1, \"d-flex\", \"flex-wrap\", \"mt-5\"], [1, \"flex-shrink-0\", \"mr-7\", \"mt-lg-0\", \"mt-3\"], [1, \"symbol\", \"symbol-50\", \"symbol-lg-120\"], [\"alt\", \"avatar\", 3, \"src\"], [1, \"flex-grow-1\"], [1, \"d-flex\", \"justify-content-between\", \"flex-wrap\", \"mt-1\"], [1, \"d-flex\", \"mr-3\"], [1, \"text-dark-75\", \"font-size-h5\", \"font-weight-bold\", \"mr-3\", \"bold\"], [1, \"d-flex\", \"flex-column\", \"flex-grow-1\", \"pr-8\"], [1, \"d-flex\", \"flex-column\", \"mb-4\"], [1, \"text-dark-50\", \"font-weight-bold\", \"mr-lg-8\", \"mr-5\", \"mb-lg-0\"], [1, \"flaticon2-new-email\", \"mr-2\", \"font-size-lg\"], [1, \"flaticon2-placeholder\", \"mr-2\", \"font-size-lg\"], [1, \"flaticon2-phone\", \"mr-2\", \"font-size-lg\"], [1, \"text-dark-50\", \"font-weight-bold\"], [1, \"flaticon-gift\", \"mr-2\", \"font-size-lg\"], [\"novalidate\", \"\", 1, \"mb-5\", \"text-wrap\", 3, \"formGroup\"], [1, \"row\"], [1, \"col-md-8\"], [1, \"m-3\", \"p-5\"], [1, \"col-12\", \"col-md-4\", \"col-lg-4\", \"col-sm-12\", \"col-xs-12\"], [1, \"col-12\", \"col-md-7\", \"col-lg-7\", \"col-sm-12\", \"col-xs-12\", \"bold\"], [1, \"col-12\", \"col-md-5\", \"col-lg-5\", \"col-sm-12\", \"col-xs-12\", \"bold\"], [1, \"col-12\", \"col-md-6\", \"col-lg-6\", \"col-sm-12\", \"col-xs-12\", \"bold\"]],\n    template: function PersonalInformationComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"h1\", 3);\n        i0.ɵɵtext(4, \"Personal Details\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(5, \"div\", 4);\n        i0.ɵɵelementStart(6, \"form\", 5);\n        i0.ɵɵelementStart(7, \"div\", 6);\n        i0.ɵɵelementStart(8, \"div\", 7);\n        i0.ɵɵelementStart(9, \"div\", 8);\n        i0.ɵɵelement(10, \"img\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\", 10);\n        i0.ɵɵelementStart(12, \"div\", 11);\n        i0.ɵɵelementStart(13, \"div\", 12);\n        i0.ɵɵelementStart(14, \"a\", 13);\n        i0.ɵɵtext(15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"div\", 11);\n        i0.ɵɵelementStart(17, \"div\", 14);\n        i0.ɵɵelementStart(18, \"div\", 15);\n        i0.ɵɵelementStart(19, \"a\", 16);\n        i0.ɵɵtext(20);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"a\", 16);\n        i0.ɵɵelement(22, \"i\", 17);\n        i0.ɵɵtext(23);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"a\", 16);\n        i0.ɵɵelement(25, \"i\", 18);\n        i0.ɵɵtext(26);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"a\", 16);\n        i0.ɵɵelement(28, \"i\", 19);\n        i0.ɵɵtext(29);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"a\", 20);\n        i0.ɵɵelement(31, \"i\", 21);\n        i0.ɵɵtext(32);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(33, \"div\", 0);\n        i0.ɵɵelementStart(34, \"div\", 1);\n        i0.ɵɵelementStart(35, \"div\", 2);\n        i0.ɵɵelementStart(36, \"h1\", 3);\n        i0.ɵɵtext(37, \"Official Details\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(38, \"form\", 22);\n        i0.ɵɵelementStart(39, \"div\");\n        i0.ɵɵelement(40, \"div\", 4);\n        i0.ɵɵelementStart(41, \"div\", 23);\n        i0.ɵɵelementStart(42, \"div\", 24);\n        i0.ɵɵelementStart(43, \"dl\", 25);\n        i0.ɵɵelementStart(44, \"div\", 23);\n        i0.ɵɵelementStart(45, \"dt\", 26);\n        i0.ɵɵelementStart(46, \"span\");\n        i0.ɵɵtext(47, \"Department\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(48, \"dd\", 27);\n        i0.ɵɵelementStart(49, \"span\");\n        i0.ɵɵtext(50);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(51, \"div\", 23);\n        i0.ɵɵelementStart(52, \"dt\", 26);\n        i0.ɵɵtext(53, \" Teams/Practice \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(54, \"dd\", 27);\n        i0.ɵɵelementStart(55, \"span\");\n        i0.ɵɵtext(56);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(57, \"div\", 23);\n        i0.ɵɵelementStart(58, \"dt\", 26);\n        i0.ɵɵtext(59, \" Band \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(60, \"dd\", 28);\n        i0.ɵɵelementStart(61, \"span\");\n        i0.ɵɵtext(62);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(63, \"div\", 23);\n        i0.ɵɵelementStart(64, \"dt\", 26);\n        i0.ɵɵtext(65, \" Country \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(66, \"dd\", 28);\n        i0.ɵɵelementStart(67, \"span\");\n        i0.ɵɵtext(68);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(69, \"div\", 23);\n        i0.ɵɵelementStart(70, \"dt\", 26);\n        i0.ɵɵtext(71, \" State \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(72, \"dd\", 28);\n        i0.ɵɵelementStart(73, \"span\");\n        i0.ɵɵtext(74);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(75, \"div\", 23);\n        i0.ɵɵelementStart(76, \"dt\", 26);\n        i0.ɵɵtext(77, \" City \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(78, \"dd\", 27);\n        i0.ɵɵelementStart(79, \"span\");\n        i0.ɵɵtext(80);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(81, \"div\", 23);\n        i0.ɵɵelementStart(82, \"dt\", 26);\n        i0.ɵɵtext(83, \" Pin Code \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(84, \"dd\", 29);\n        i0.ɵɵelementStart(85, \"span\");\n        i0.ɵɵtext(86);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(87, \"div\", 23);\n        i0.ɵɵelementStart(88, \"dt\", 26);\n        i0.ɵɵtext(89, \" Reporting Person \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(90, \"dd\", 27);\n        i0.ɵɵelementStart(91, \"span\");\n        i0.ɵɵtext(92);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(93, \"div\", 23);\n        i0.ɵɵelementStart(94, \"dt\", 26);\n        i0.ɵɵtext(95, \" Date Of joining \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(96, \"dd\", 28);\n        i0.ɵɵelementStart(97, \"span\");\n        i0.ɵɵtext(98);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(99, \"div\", 23);\n        i0.ɵɵelementStart(100, \"dt\", 26);\n        i0.ɵɵtext(101, \" Employee ID \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(102, \"dd\", 28);\n        i0.ɵɵelementStart(103, \"span\");\n        i0.ɵɵtext(104);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(105, \"div\", 23);\n        i0.ɵɵelementStart(106, \"dt\", 26);\n        i0.ɵɵtext(107, \" Group Member \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(108, \"dd\", 28);\n        i0.ɵɵelementStart(109, \"span\");\n        i0.ɵɵtext(110);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(111, \"div\", 23);\n        i0.ɵɵelementStart(112, \"dt\", 26);\n        i0.ɵɵtext(113, \" External Email Rights \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(114, \"dd\", 28);\n        i0.ɵɵelementStart(115, \"span\");\n        i0.ɵɵtext(116, \"???\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(117, \"div\", 23);\n        i0.ɵɵelementStart(118, \"dt\", 26);\n        i0.ɵɵtext(119, \" Aaryans Team Member \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(120, \"dd\", 28);\n        i0.ɵɵelementStart(121, \"span\");\n        i0.ɵɵtext(122, \"???\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(123, \"div\", 23);\n        i0.ɵɵelementStart(124, \"dt\", 26);\n        i0.ɵɵtext(125, \" Team Work Access \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(126, \"dd\", 28);\n        i0.ɵɵelementStart(127, \"span\");\n        i0.ɵɵtext(128, \"???\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"formGroup\", ctx.formGroup);\n        i0.ɵɵadvance(4);\n        i0.ɵɵpropertyInterpolate(\"src\", ctx.imageData, i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate2(\" \", ctx.userDetails.first_name, \" \", ctx.userDetails.last_name, \" \");\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(ctx.userDetails.designation);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.userDetails.email);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate5(\"\", ctx.userDetails.street_address, \" \", ctx.userDetails.city, \", \", ctx.userDetails.state, \", \", ctx.userDetails.country, \", Pin: \", ctx.userDetails.postal_code, \"\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.userDetails.phone);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.userDetails.birthday);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"formGroup\", ctx.formGroup);\n        i0.ɵɵadvance(12);\n        i0.ɵɵtextInterpolate(ctx.userDetails.department);\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(ctx.userDetails.team);\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(ctx.userDetails.band);\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(ctx.userDetails.country);\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(ctx.userDetails.state);\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(ctx.userDetails.city);\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(ctx.userDetails.postal_code);\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(ctx.userDetails.reporting_manager_name);\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(ctx.userDetails.joining_date);\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(ctx.userDetails.employee_code);\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(ctx.userDetails.groups);\n      }\n    },\n    directives: [i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.FormGroupDirective],\n    styles: [\".checked[_ngcontent-%COMP%]{color:orange}.myOwn[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif!important}dl[_ngcontent-%COMP%]{width:100%;overflow:hidden;padding:0;margin:0}dt[_ngcontent-%COMP%], dd[_ngcontent-%COMP%]{float:left;width:50%;padding:0;margin-bottom:10px;margin-top:10px}  .custom-slider .ng5-slider .ng5-slider-bar{background:#3699ff;height:5px}  .custom-slider .ng5-slider .ng5-slider-selection{background:red}  .custom-slider .ng5-slider .ng5-slider-pointer{width:8px;height:16px;top:auto;bottom:-1px;background-color:red;border-top-left-radius:100px;border-top-right-radius:100px}  .custom-slider .ng5-slider .ng5-slider-pointer:after{display:none}  .custom-slider .ng5-slider .ng5-slider-bubble{bottom:14px}  .custom-slider .ng5-slider .ng5-slider-limit{font-weight:700;color:#000}  .custom-slider .ng5-slider .ng5-slider-tick{width:1px;height:10px;margin-left:4px;border-radius:0;background:#ffe4d1;top:-1px}  .custom-slider .ng5-slider .ng5-slider-tick.ng5-slider-selected{background:blue}.bold[_ngcontent-%COMP%]{font-weight:600!important}\"]\n  });\n  return PersonalInformationComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}